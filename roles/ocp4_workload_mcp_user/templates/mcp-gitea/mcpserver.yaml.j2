---
apiVersion: toolhive.stacklok.dev/v1alpha1
kind: MCPServer
metadata:
  name: gitea
  namespace: {{ ocp4_workload_mcp_namespace }}
spec:
  image: {{ ocp4_workload_mcp_gitea_image }}
  proxyPort: 8080
  mcpPort: 8080
  targetPort: 8080
  transport: streamable-http
  secrets:
  - name: gitea-creds
    key: url
    targetEnvName: GITEA_HOST
  - name: gitea-creds
    key: token
    targetEnvName: GITEA_ACCESS_TOKEN
  podTemplateSpec:
    spec:
      containers:
      - name: mcp
        args:
        - /app/gitea-mcp
        - -d
        - -port
        - "8080"
        - -transport
        - http
